/* This GEL file is to provid examples of using GEL function to utilize*/
/* various reset functions and features provided in OMAP3430 CSP       */

menuitem "OMAP3430_RESETS"


#define BLOCK_RESET_STAY 2
#define BLOCK_RESET_ONCE 1
#define BLOCK_RESET_OFF  0

#define ENABLE_WIR       1
#define DISABLE_WIR      0

hotmenu EnableWIRMode()
{
	GEL_SetWaitInResetMode(ENABLE_WIR);
	GEL_TextOut( "Wait In Reset is enabled through GEL.\n\n" );
}

hotmenu DisableWIRMode()
{
	GEL_SetWaitInResetMode(DISABLE_WIR);
	GEL_TextOut( "Wait In Reset is disabled through GEL.\n\n" );	
}


hotmenu EnableBlockReset()
{
    GEL_SetBlockResetMode( BLOCK_RESET_ONCE );
    GEL_TextOut( "Block Reset is enabled through GEL.\n\n" );
}

hotmenu DisableBlockReset()
{
    GEL_SetBlockResetMode ( BLOCK_RESET_OFF );
    GEL_TextOut( "Block Reset is disabled through GEL.\n\n" );
}

hotmenu SystemReset()
{
    GEL_AdvancedReset ( "System Reset" );
    GEL_TextOut( "System Reset has been issued through GEL.\n\n" );	
}

hotmenu CpuReset()
{
    GEL_AdvancedReset ( "CPU Reset" );
    GEL_TextOut( "CPU Reset (soft reset) has been issued through GEL.\n\n" );
}

hotmenu ResetViaPRCM()
{
   
   GEL_TextOut("Disabling Halt On Reset... \n"); 
   GEL_SetWaitInResetMode(0);

   GEL_TextOut("Apply Reset... \n"); 
   *(int*)0x48307250 = 0x2;

   GEL_TextOut("System reset applied followed by enabling of Halt On Reset \n");

   GEL_SetWaitInResetMode(1);
}


