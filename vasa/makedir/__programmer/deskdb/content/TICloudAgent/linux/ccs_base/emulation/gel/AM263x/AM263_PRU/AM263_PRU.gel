/**
 * \file  AM263_PRU.gel
 *
 * \brief GEL File to Configure/Init the PRU-ICSSM of AM263x
 */

/* Copyright (c) 2021, Texas Instruments Incorporated
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * *  Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * *  Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * *  Neither the name of Texas Instruments Incorporated nor the names of
 *    its contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
 

#define ICSS_M_PDSP0_BASE                                    (0x00022000U)
#define ICSS_M_PDSP1_BASE                                    (0x00024000U)


menuitem "AM263x PRU_ICSS Configuration"

hotmenu PRU_ICSS_Init()
{
		
		//GEL_MemoryFill(0x48000000, 0, 8*1024, 0x0, 0x13); // DRAM
		//GEL_MemoryFill(0x48010000, 0, 32*1024, 0x0, 0x13);  // Shared RAM 32 K for AM263x
		PRU_ICSS_Core0_and_1_Start();

}


hotmenu PRU_ICSS_Core0_and_1_Start()
{
	GEL_TextOut("\t**** PRU-ICSS PRU0&1 is being started **** \n","Output",1,1,1);
	*((unsigned int*) 0x48022000) = 0xB;
	*((unsigned int*) 0x48024000) = 0xB;
}

hotmenu PRU_ICSS_Core0_and_1_Halt()
{
	GEL_TextOut("\t**** PRU-ICSS PRU0&1 is being Halted **** \n","Output",1,1,1);
	*((unsigned int*) 0x48022000) = 0;
	*((unsigned int*) 0x48024000) = 0;
}

hotmenu PRU_ICSS_Write2_DRAM()
{
    unsigned int i, *dram;
    dram = 0x48000000;
    for (i = 0; i < 16; i++)
    {
            *dram++ = 0xA5A5A5A5;
    }

	GEL_TextOut("\t**** PRU-ICSS PRU0&1 DRAM is being written **** \n","Output",1,1,1);

}


hotmenu PRU_ICSS_Write2_SHARED_RAM()
{
	
    unsigned int *shrdram ;
	unsigned int j;
    shrdram = 0x48001000;
    for (j = 0; j < 16; j++)
    {
            *shrdram++ = 0x5A5A5A5A ;
    }
	GEL_TextOut("\n PRU-ICSS PRU0&1 SHRAM is being written \n");

}
